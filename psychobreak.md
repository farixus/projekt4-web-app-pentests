# Psycho Break
## Web application pentest
### Subject
Web application pentest of machine [Psycho Break](https://tryhackme.com/room/psychobreak)
### Date
12-05-2023
### Location
Anywhere
### Auditors
farix
### Version
1.0


## Table of content
1. Executive Summary
   - Synopsis
   - Scope
   - Key Findings
   - Recommendations
2. List of Findings
3. Finding
   - Task1
   - Task2
   - Task3
   - Task4
   - Task5
4. Walkthrough


## Executive Summary

## List of Findings
### Task1
#### Title \#1
FTP
#### Description (reproduction steps)
In my scan I found opened port 21 (ftp). All transmited data through this port are send in plain text. When attacker obtain access to transmited data i.e. in method MIDM (Man-In-The-Middle) can easy uncover sensitive data.
#### Recommendations
Turn off ftp service at all and use other method. SFTP (SSH FTP), SCP (Secure Copy), etc.
#### Title \#2
Banner Grabbing
#### Description (reproduction steps)
Port Scanning shows that attacker can easy uncover types and versions of applications installed on the system and system itself, gather this information and then use if to prepare relevant manner of attack.
#### Recommendations
If not really necessery turn off displaying names and versions of installed application or change it a bit.
### Task2
#### Title

#### Description (reproduction steps)

#### Recommendations

### Task3
#### Title

#### Description (reproduction steps)

#### Recommendations

### Task4
#### Title

#### Description (reproduction steps)

#### Recommendations

### Task5
#### Title

#### Description (reproduction steps)

#### Recommendations


## Walkthrough
### Web
As we can read at the beginning this room was based on a video game called evil within. So try this out!
Deploy the machine and start Reconnaissance.

`Write ip address of machine to /etc/hosts to use friendly name instead of ip address`

Add line to /etc/hosts
```
10.10.227.164   psychobreak.sda
```

Start to scan:

```
sudo nmap -sSCV -T4 -A -oA nmap_scan psychobreak.sda

```
As a result of above commend we get opened ports with banner info and operating system name.
```
21/tcp open  ftp     ProFTPD 1.3.5a
22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.10 (Ubuntu Linux; protocol 2.0)
80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))

```

Answer the questions:

Deploy the machine.
`No answer needed`

How many ports are open?
`3`

What is the operating system that runs on the target machine?
`Ubuntu`
### Help Mee
Open site `psychobreak.sda` in browser

![Start Page](https://github.com/farixus/projekt4-web-app-pentests/blob/main/screenshots_psychobreak/01_start_page.png)

Nothing special, try to look, what in source page is.
```
...
<div class="center-wrapper">
		<img src="hospital.png">
	</div>

	<red><!-- Sebastian sees a path through the darkness which leads to a room => /sadistRoom -->

	<br>
...
```

I found a hint in source, namely hidden directory /sadistRoom

![sadistRoom](https://github.com/farixus/projekt4-web-app-pentests/blob/main/screenshots_psychobreak/02_sadistroom_page.png)

and a key to locker Room. 
`Key to locker Room => 532219a04ab7a02b56faafbec1a4c1ea`

Enter the key on the next page, be hurry before "Sebastian is dead". Click "Go to Locker Room"

![Enter the key here](https://github.com/farixus/projekt4-web-app-pentests/blob/main/screenshots_psychobreak/04_key_enter_page.png)

Now, we have another page "Locker Room". We neet to decode text: "Tizmg_nv_zxxvhh_gl_gsv_nzk_kovzhv" before we could go further.

Trying base64, Caesar Cipher, nothing. As a result of searching it follows that it is a `atbash code`: https://www.geeksforgeeks.org/implementing-atbash-cipher/

I modified python script (from page: https://www.geeksforgeeks.org/implementing-atbash-cipher/) to decode the string. I got key to map: Grant_me_access_to_the_map_please
After entering code on next page, got the **map**.

![Here is the map](https://github.com/farixus/projekt4-web-app-pentests/blob/main/screenshots_psychobreak/06.map_page.png)

Let's visit next room: Safe Heaven
![Safe Heaven](https://github.com/farixus/projekt4-web-app-pentests/blob/main/screenshots_psychobreak/07_safe_heaven_page.png)

In source page I found another comment: "<!-- I think I'm having a terrible nightmare. Search through me and find it ... -->"

Probably, there are other hidden dirs. Let's find them with gobuster
```
gobuster dir -u http://psychobreak.sda/SafeHeaven/ -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt
```
gobuster found two other dirs:
/img
/keeper
Open page: psychobreak.sda/SafeHeaven/keeper/

![The Keeper](https://github.com/farixus/projekt4-web-app-pentests/blob/main/screenshots_psychobreak/08_keeper_page.png)

Press `Escape Keeper` and I have 1min45sec to find what this place is. Let's use google to reverse search the name of image. 

![Reverse search](https://github.com/farixus/projekt4-web-app-pentests/blob/main/screenshots_psychobreak/09_safe_yourself_page.png)

Result: `St. Augustine lighthouse`

After correct answer, we got another key: The Keeper Key
"Here is your key : 48ee41458eb0b43bf82b986cecf3af01"

**Notice** the address bar
![file name]()


Back to the map and open the last room: Abandoned Room
